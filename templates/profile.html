{% extends "base.html" %}

{% block title %}Мой профиль{% endblock %}
{% block header_title %}Мой профиль{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <img src="{{ user.photo_url }}" alt="Фото профиля" class="profile-photo">
        <div class="profile-info">
            <h2>{{ user.name }}</h2>
            <div class="rating-badge">
                ⭐ {{ user.rating }} 
                <span class="rank">({{ (user.wins/user.matches*100)|round }}% побед)</span>
            </div>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ user.matches }}</div>
            <div class="stat-label">Матчей</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ user.wins }}</div>
            <div class="stat-label">Побед</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ user.matches - user.wins }}</div>
            <div class="stat-label">Поражений</div>
        </div>
    </div>

    <h3 class="section-title">Последние игры</h3>
    <div class="games-list">
        {% for game in user.last_games %}
        <div class="game-item">
            <span class="opponent">{{ game.opponent }}</span>
            <span class="result {% if game.result.split(':')[0] > game.result.split(':')[1] %}win{% else %}lose{% endif %}">
                {{ game.result }}
            </span>
            <span class="game-date">{{ game.date }}</span>
        </div>
        {% endfor %}
    </div>

    <button class="tg-button edit-profile">Редактировать профиль</button>
</div>
{% endblock %}
